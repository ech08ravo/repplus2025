# Contact Lens Dataset Instructions

## Overview
The contact lens dataset is a classic UCI Machine Learning dataset that has been formatted for use with RepPlusApp. It contains 24 patient cases evaluated across 4 constructs to determine contact lens recommendations.

## Dataset Structure

### Elements (24 patient cases)
- Case 1 through Case 24
- Each represents a unique combination of patient attributes

### Constructs (4 patient attributes)
1. **age**: young - presbyopic
   - young = 1
   - pre-presbyopic = 4
   - presbyopic = 7

2. **spectacle_prescription**: myope - hypermetrope
   - myope = 1
   - hypermetrope = 7

3. **astigmatism**: no - yes
   - no = 1
   - yes = 7

4. **tear_production**: reduced - normal
   - reduced = 1
   - normal = 7

### Outcome Variable
- **lens_recommendation**: none, soft, or hard
- This is stored in the CSV but not used in the repertory grid analysis

## Files Provided

1. **contact_lens_repgrid.json** - Original data in JSON format with categorical values
2. **contact_lens_data.csv** - Original data in CSV format with categorical values
3. **contact_lens.rgrid** - Converted data ready for import into RepPlusApp (generated by conversion script)

## How to Load into RepPlusApp

### Method 1: Using the .rgrid file (Recommended)

1. Run the Shiny app:
   ```r
   shiny::runApp()
   ```

2. In the app sidebar:
   - Click **Choose File** under "Import .rgrid"
   - Navigate to `dataExamples/contact_lens.rgrid`
   - Click **Load Grid**

3. The grid will load with all 24 elements and 4 constructs

4. Click **Analyze Grid** to view visualizations

### Method 2: Converting from CSV

If you need to regenerate the .rgrid file from the CSV:

```r
source("dataExamples/convert_contact_lens.R")
```

This will create a new `contact_lens.rgrid` file.

## Analysis Recommendations

Once loaded, try these analyses:

### 1. Heatmap
- Shows the full 24Ã—4 grid with hierarchical clustering
- Toggle "Use color heatmap" for different visualization styles

### 2. Synopsis
- **Overall Distribution**: See how ratings are distributed (mostly 1s and 7s due to binary constructs)
- **Element Distributions**: Compare rating patterns across the 24 cases
- **Construct Distributions**: See how each construct varies across patients
- **Scree Plot**: View variance explained (expect ~75% in first 2 components due to binary constructs)

### 3. Crossplot
- Plot elements on any two constructs
- Good combinations:
  - X: age, Y: tear_production
  - X: spectacle_prescription, Y: astigmatism

### 4. PCA Biplot
- Elements cluster based on similar attribute combinations
- Constructs show as vectors indicating their contribution to variance

### 5. Focus Cluster Analysis
- Run Focus Analysis with default settings (Minkowski Power = 1.0)
- Look for element groupings based on similar attribute profiles
- Check Match Data to see similarity percentages

### 6. Dendrograms
- **Element Dendrogram**: Shows which patient cases are most similar
- **Construct Dendrogram**: Shows which attributes co-vary

## Understanding the Results

This dataset has special characteristics:
- Most constructs are **binary** (only values 1 or 7), except age which is ternary (1, 4, 7)
- This creates distinct clusters of elements with similar profiles
- High similarity scores in Focus analysis indicate patients with matching attributes
- Elements with the same outcome (lens recommendation) may cluster together

## Notes

- The original dataset uses categorical values, but RepPlusApp requires numeric ratings on a 1-7 scale
- The conversion maps categorical values to 1 (left pole) and 7 (right pole)
- Three-level constructs (like age) use 1, 4, 7 to represent the three categories
- Missing data imputation is not needed for this dataset (all ratings are complete)
